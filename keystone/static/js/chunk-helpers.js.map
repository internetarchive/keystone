{"version":3,"file":"chunk-helpers.js","sources":["../../../../../web-components/src/lib/constants.ts","../../../../../web-components/src/lib/types.ts","../../../../../web-components/src/lib/helpers.ts"],"sourcesContent":["import { CollectionType, ProcessingState } from \"./types\";\n\nexport const HtmlStatusCodeRegex = /^[1-5]\\d\\d$/;\n\n// SurtRegex: domain labels separated by commas optionally followed by \")\" or \")/.*\"\nconst ValidLabelChars = \"[a-zA-Z0-9\\\\-]\";\nexport const SurtPrefixRegex = new RegExp(\n  `^${ValidLabelChars}+,${ValidLabelChars}+(${ValidLabelChars}+,?)*((\\\\))|(\\\\)/.*))?$`\n);\n\nexport const BoolDisplayMap: Record<string, string> = {\n  true: \"Yes\",\n  false: \"No\",\n};\n\nexport const EventTypeDisplayMap: Record<ProcessingState, string> = {\n  SUBMITTED: \"Submitted\",\n  QUEUED: \"Queued\",\n  RUNNING: \"Running\",\n  FINISHED: \"Finished\",\n  FAILED: \"Failed\",\n  CANCELLED: \"Cancelled\",\n};\n\nexport const CollectionTypeDisplayMap: Record<CollectionType, string> = {\n  AIT: \"Archive-It\",\n  CUSTOM: \"Custom\",\n  SPECIAL: \"Special\",\n};\n\n// The URL params to use for specifying a single Collection.id value.\nexport const UrlCollectionParamName = \"cid\";\n\n// The URL params to use for specifying an array of Collection.id values.\nexport const UrlCollectionsParamName = \"cid[]\";\n\nexport const DefaultSelectElementPromptText = \"Please select...\";\n","import { JSONSchemaType } from \"ajv\";\nimport { SomeJSONSchema } from \"ajv/lib/types/json-schema\";\n\nexport { SomeJSONSchema };\n\nimport { ArchJobCard } from \"../archGenerateDatasetForm/src/arch-job-card\";\n\nexport type ValueOf<T> = T[keyof T];\nexport type Modify<T, R> = Omit<T, keyof R> & R;\n\nexport enum ProcessingState {\n  SUBMITTED = \"SUBMITTED\",\n  QUEUED = \"QUEUED\",\n  RUNNING = \"RUNNING\",\n  FINISHED = \"FINISHED\",\n  FAILED = \"FAILED\",\n  CANCELLED = \"CANCELLED\",\n}\n\nexport type CollectionMetadataBase = {\n  object_count?: number;\n  object_name_singular?: string;\n  object_name_plural?: string;\n};\n\nexport type AITCollectionMetadata = CollectionMetadataBase & {\n  is_public?: boolean;\n  num_seeds?: number;\n  last_crawl_date?: Date;\n};\n\nexport type CustomCollectionMetadata = CollectionMetadataBase & {\n  state: ProcessingState;\n};\n\nexport type SpecialCollectionMetadata = CollectionMetadataBase & {\n  input_spec?: Record<string, string>;\n  type_displayname?: string;\n};\n\nexport type CollectionMetadata =\n  | AITCollectionMetadata\n  | CustomCollectionMetadata\n  | SpecialCollectionMetadata;\n\nexport enum CollectionType {\n  AIT = \"AIT\",\n  SPECIAL = \"SPECIAL\",\n  CUSTOM = \"CUSTOM\",\n}\n\nexport type Collection = {\n  account_id: number;\n  id: number;\n  name: string;\n  collection_type: CollectionType;\n  size_bytes: number;\n  dataset_count: number;\n  latest_dataset: {\n    id: number;\n    name: string;\n    start_time: Date;\n  };\n  metadata: CollectionMetadata;\n};\n\nexport type CollectionIdNamePairs = Array<\n  [Collection[\"id\"], Collection[\"name\"]]\n>;\n\nexport interface CollectionSearchResult {\n  organizationId: number;\n  organizationName: string;\n  collectionName: string;\n  collectionId: number;\n  meta_Description?: string;\n  totalWarcBytes: number;\n  created_dt: string;\n}\n\nexport interface CollectionAddToCartEventDetail {\n  collectionSize: string;\n  isSelected: boolean;\n  collectionName: string;\n  collectionId: string;\n  organizationName: string;\n  createdDt: string;\n}\n\nexport interface CollectionSelectedDetail {\n  collectionSize: string;\n  collectionId: string;\n  organizationName: string;\n  createdDt: string;\n}\n\nexport interface Facets {\n  [key: string]: Array<string | number>;\n}\n\nexport interface FacetResultMap {\n  name: string;\n  count: number;\n}\n\nexport interface SelectedFacets {\n  f_organizationName: string[];\n  f_organizationType: string[];\n}\n\nexport interface SolrData {\n  collections: CollectionSearchResult[];\n  facets: Facets;\n}\n\nexport interface CollectionRemovedFromCartDetail {\n  collectionName: string;\n}\n\nexport type Dataset = {\n  category_name: string;\n  collection_access: boolean;\n  collection_id: number;\n  collection_name: string;\n  finished_time: Date;\n  id: number;\n  is_sample: boolean;\n  job_id: string;\n  name: string;\n  start_time: Date;\n  state: ProcessingState;\n};\n\ntype DatasetStartTimeString = string;\n\nexport type JobIdStatesMap = Record<\n  Dataset[\"job_id\"],\n  Array<[Dataset[\"id\"], DatasetStartTimeString, Dataset[\"state\"]]>\n>;\n\nexport enum UserRoles {\n  ADMIN = \"ADMIN\",\n  USER = \"USER\",\n}\n\nexport type User = {\n  id: number;\n  account_id: number;\n  username: string;\n  first_name: string;\n  last_name: string;\n  email: string;\n  role: UserRoles;\n  date_joined: Date;\n  last_login: Date;\n  teams: Array<MinimalTeam>;\n};\n\nexport type MinimalUser = Pick<User, \"id\" | \"username\">;\n\nexport type UserUpdate = Pick<\n  User,\n  \"first_name\" | \"last_name\" | \"email\" | \"role\" | \"teams\"\n>;\n\nexport type Team = {\n  account_id: number;\n  id: number;\n  name: string;\n  members: Array<MinimalUser>;\n};\n\nexport type MinimalTeam = Pick<Team, \"id\" | \"name\">;\n\nexport type TeamUpdate = {\n  name?: string;\n  members?: Array<MinimalUser>;\n};\n\n// AvailableJob parameters types\n\ntype GlobalJobParameters = {\n  sample: boolean;\n};\n\ntype NamedEntityExtractionParameters = GlobalJobParameters & {\n  language: string;\n};\n\nexport type JobParameters = NamedEntityExtractionParameters;\nexport type JobParametersKey = keyof JobParameters;\nexport type JobParametersValue = JobParameters[JobParametersKey];\n\n// Datasets objects are also used to convey job state.\nexport type JobState = Dataset;\n\n// JobId is a UUID7 string.\nexport type JobId = string;\n\nexport type AvailableJob = {\n  id: JobId;\n  name: string;\n  description: string;\n  info_url: string;\n  code_url: string;\n  parameters_schema: JSONSchemaType<JobParameters>;\n};\n\nexport type AvailableJobsCategory = {\n  categoryName: string;\n  categoryDescription: string;\n  categoryImage: string;\n  categoryId: string;\n  jobs: Array<AvailableJob>;\n};\n\nexport type AvailableJobs = Array<AvailableJobsCategory>;\n\nexport type PublishedDatasetInfoApiResponse = {\n  item: string;\n  source: string;\n  collection: string;\n  job: JobId;\n  complete: boolean;\n  sample: boolean;\n  time: string;\n  ark: string;\n};\n\nexport type PublishedDatasetInfo = Modify<\n  PublishedDatasetInfoApiResponse,\n  {\n    time: Date;\n  }\n>;\n\nexport type PublishedDatasetMetadataApiResponse = {\n  creator?: Array<string>;\n  description?: Array<string>;\n  licenseurl?: Array<string>;\n  subject?: Array<string>;\n  title?: Array<string>;\n};\n\nexport type PublishedDatasetMetadata = {\n  creator?: Array<string>;\n  description?: string;\n  licenseurl?: string;\n  subject?: Array<string>;\n  title?: string;\n};\n\nexport type PublishedDatasetMetadataKey = keyof PublishedDatasetMetadata;\n\nexport type PublishedDatasetMetadataValue =\n  PublishedDatasetMetadata[PublishedDatasetMetadataKey];\n\nexport type PublishedDatasetMetadataJSONSchema =\n  JSONSchemaType<PublishedDatasetMetadata>;\n\nexport type PublishedDatasetMetadataJSONSchemaProps = Record<\n  keyof PublishedDatasetMetadata,\n  SomeJSONSchema\n>;\n\n// API Types\n\nexport type BaseFilteredApiResponse<T> = {\n  count: number;\n  items: T;\n};\n\ntype FilteredApiResults<T> = Array<T>;\n\ntype DistinctApiResults<T> = Array<T[keyof T]>;\n\nexport type FilteredApiResponse<T> = BaseFilteredApiResponse<\n  FilteredApiResults<T>\n>;\n\nexport type DistinctApiResponse<T> = BaseFilteredApiResponse<\n  DistinctApiResults<T>\n>;\n\nexport type ObjectApiResponse<T> = T;\n\nexport type ApiResponse<T> =\n  | FilteredApiResponse<T>\n  | DistinctApiResponse<T>\n  | ObjectApiResponse<T>;\n\nexport class ResponseError extends Error {\n  constructor(public response: Response, msg?: string) {\n    super(msg);\n  }\n}\n\ntype ApiParamOp = \"=\" | \"!=\";\n\ntype ApiFilterKey = \"distinct\" | \"limit\" | \"offset\" | \"search\" | \"sort\";\n\nexport type ApiParams<T> = Array<\n  [keyof T | ApiFilterKey, ApiParamOp, string | number | boolean]\n>;\n\n// Custom Events\n\nexport type GenerateDatasetDetail = {\n  archJobCard: ArchJobCard;\n};\n\nexport type GlobalModalDetail = {\n  elementToFocusOnClose: HTMLElement;\n  title: string;\n  content: string | HTMLElement;\n};\n\nexport type RunJobRequest = {\n  collection_id: Collection[\"id\"];\n  job_type_id: JobId;\n  params: JobParameters;\n};\n","export * from \"./webservices/src/lib/helpers\";\nexport { createElement } from \"./webservices/src/legacy/lib/domLib\";\n\nimport { UrlCollectionParamName, UrlCollectionsParamName } from \"./constants\";\nimport {\n  Collection,\n  CollectionType,\n  Dataset,\n  ProcessingState,\n  SpecialCollectionMetadata,\n} from \"./types\";\n\nexport const identity = <T>(x: T) => x;\n\nexport const Paths = {\n  collection: (id: Collection[\"id\"]) => `/collections/${id}`,\n\n  collections: `/collections`,\n\n  dataset: (id: Dataset[\"id\"]) => `/datasets/${id}`,\n\n  datasets: `/datasets`,\n\n  generateCollectionDataset: (collectionId: Collection[\"id\"]) =>\n    `/datasets/generate?${UrlCollectionParamName}=${collectionId}`,\n\n  buildSubCollection: (sourceCollectionIds?: Array<Collection[\"id\"]>) =>\n    sourceCollectionIds === undefined\n      ? \"/collections/custom-collection-builder\"\n      : `/collections/custom-collection-builder?${sourceCollectionIds\n          .map((x) => `${UrlCollectionsParamName}=${x}`)\n          .join(\"&\")}`,\n\n  teams: \"/account/teams\",\n};\n\nexport function isActiveProcessingState(state: ProcessingState): boolean {\n  return (\n    state === ProcessingState.SUBMITTED ||\n    state === ProcessingState.QUEUED ||\n    state === ProcessingState.RUNNING\n  );\n}\n\nexport function timestampStringToYearMonthString(timestamp: string): string {\n  const date = new Date(timestamp);\n  const formattedDate = date.toLocaleString(\"default\", {\n    month: \"short\",\n    year: \"numeric\",\n  }); // eg. \"Sep 2005\"\n\n  return formattedDate;\n}\n\nexport function readableFacetName(facetName: string, facetField: string) {\n  // convert camelcase name into a more readable form for f_organizationType field - eg. 'collegesAndUniversities' --> 'Colleges And Universities'\n  if (facetField === \"f_organizationType\") {\n    const nameWordsSeparated = facetName.split(/(?=[A-Z])/); // split on capital letter\n    return nameWordsSeparated\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(\" \"); // capitalize each word and join with spaces\n  } else {\n    return facetName;\n  }\n}\n\nexport function isValidCustomInputCollection(collection: Collection): boolean {\n  /**\n   * Return a bool indicating whether the specified collection can be used as a\n   * custom collection input.\n   */\n  return (\n    collection.collection_type === CollectionType.AIT ||\n    collection.collection_type === CollectionType.CUSTOM ||\n    (collection.collection_type === CollectionType.SPECIAL &&\n      !(collection.metadata as SpecialCollectionMetadata)?.input_spec)\n  );\n}\n"],"names":["HtmlStatusCodeRegex","ValidLabelChars","SurtPrefixRegex","RegExp","BoolDisplayMap","true","false","EventTypeDisplayMap","SUBMITTED","QUEUED","RUNNING","FINISHED","FAILED","CANCELLED","CollectionTypeDisplayMap","AIT","CUSTOM","SPECIAL","UrlCollectionParamName","UrlCollectionsParamName","DefaultSelectElementPromptText","ProcessingState","CollectionType","UserRoles","ResponseError","Error","constructor","response","msg","super","this","identity","x","Paths","collection","id","collections","dataset","datasets","generateCollectionDataset","collectionId","buildSubCollection","sourceCollectionIds","undefined","map","join","teams","isActiveProcessingState","state","timestampStringToYearMonthString","timestamp","Date","toLocaleString","month","year","readableFacetName","facetName","facetField","split","word","charAt","toUpperCase","slice","isValidCustomInputCollection","collection_type","_a","metadata","input_spec"],"mappings":"AAEO,MAAMA,EAAsB,cAG7BC,EAAkB,iBACXC,EAAkB,IAAIC,OACjC,IAAIF,MAAoBA,MAAoBA,4BAGjCG,EAAyC,CACpDC,KAAM,MACNC,MAAO,MAGIC,EAAuD,CAClEC,UAAW,YACXC,OAAQ,SACRC,QAAS,UACTC,SAAU,WACVC,OAAQ,SACRC,UAAW,aAGAC,EAA2D,CACtEC,IAAK,aACLC,OAAQ,SACRC,QAAS,WAIEC,EAAyB,MAGzBC,EAA0B,QAE1BC,EAAiC,uBC1BlCC,EAmCAC,EA+FAC,GAlIZ,SAAYF,GACVA,EAAA,UAAA,YACAA,EAAA,OAAA,SACAA,EAAA,QAAA,UACAA,EAAA,SAAA,WACAA,EAAA,OAAA,SACAA,EAAA,UAAA,WACD,CAPD,CAAYA,IAAAA,EAOX,CAAA,IA4BD,SAAYC,GACVA,EAAA,IAAA,MACAA,EAAA,QAAA,UACAA,EAAA,OAAA,QACD,CAJD,CAAYA,IAAAA,EAIX,CAAA,IA2FD,SAAYC,GACVA,EAAA,MAAA,QACAA,EAAA,KAAA,MACD,CAHD,CAAYA,IAAAA,EAGX,CAAA,IAoJK,MAAOC,UAAsBC,MACjCC,YAAmBC,EAAoBC,GACrCC,MAAMD,GADWE,KAAQH,SAARA,CAElB,EC1RU,MAAAI,EAAeC,GAASA,EAExBC,EAAQ,CACnBC,WAAaC,GAAyB,gBAAgBA,IAEtDC,YAAa,eAEbC,QAAUF,GAAsB,aAAaA,IAE7CG,SAAU,YAEVC,0BAA4BC,GAC1B,0BAAgDA,IAElDC,mBAAqBC,QACKC,IAAxBD,EACI,yCACA,0CAA0CA,EACvCE,KAAKZ,GAAM,GAAGb,KAA2Ba,MACzCa,KAAK,OAEdC,MAAO,kBAGH,SAAUC,EAAwBC,GACtC,OACEA,IAAU3B,EAAgBb,WAC1BwC,IAAU3B,EAAgBZ,QAC1BuC,IAAU3B,EAAgBX,OAE9B,CAEM,SAAUuC,EAAiCC,GAO/C,OANa,IAAIC,KAAKD,GACKE,eAAe,UAAW,CACnDC,MAAO,QACPC,KAAM,WAIV,CAEgB,SAAAC,EAAkBC,EAAmBC,GAEnD,GAAmB,uBAAfA,EAAqC,CAEvC,OAD2BD,EAAUE,MAAM,aAExCd,KAAKe,GAASA,EAAKC,OAAO,GAAGC,cAAgBF,EAAKG,MAAM,KACxDjB,KAAK,IACT,CACC,OAAOW,CAEX,CAEM,SAAUO,EAA6B7B,SAK3C,OACEA,EAAW8B,kBAAoB1C,EAAeP,KAC9CmB,EAAW8B,kBAAoB1C,EAAeN,QAC7CkB,EAAW8B,kBAAoB1C,EAAeL,mBAC3CgD,EAAA/B,EAAWgC,+BAAwCC,WAE3D"}